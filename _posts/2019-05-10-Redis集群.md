---
layout:     post
title:      文章拿在手 Redis 面试不用愁（三）
subtitle:   Redis 集群
date:       2019-05-10
author:     Alessio
header-img: img/PostBack_11.jpg
catalog: true
tags:
    - Redis
---

## 啥是集群啊

集群这个词儿近几年简直都要听得耳朵起茧子了，不得不说的是，集群的存在确实为我们提高服务的高可用起到了很大的功劳

这次我们来仔细地说一说 redis 集群，看看再提高性能方面他究竟做了哪些努力，看看我们如何完成 redis 集群的高可用配置

其实说到 redis 的集群，大致有这么几种模式

- 主从复制模式   这是最基础的集群模式
- redis Sentinel 模式  进阶版主从复制，提供集群的监控和故障时调整
- redis Cluster 模式   为适应分布式架构推出的集群模式

我们从最简单的开始。
## Redis Sentinel 模式

### 从主从复制的不足开始

在上一篇文章中我们介绍了 redis 的主从复制，然而主从复制还有一个极为重要的东西，就是 **架构** 。

我们在创建主从复制的节点之前，必须要考虑的一点就是，我们要搭建一个什么样的结构，比如一主一从，一主多从。我们要考虑的首要就是“要为主节点分配几个从节点”

在完成拓扑搭建之后，我们的主从复制集群就已经可以工作了。是的，这就是一个集群。

但是选择单纯的主从复制带来的另一个痛点就是，我们的服务一旦发生故障，就需要手动重新调整节点——节点之间并不存在自动发现机制。

在 redis 前期，我们有不同的工具选择来完成集群状态的监控和调整，简单来讲，也是完成了两个动作——将宕机的节点撤下，将合格的从节点晋升为主节点。

后来 redis 提供了官方的监控机制 —— redis Sentinel 模式，我们终于可以简简单单地完成服务的调整了。sentinel 哨兵会在你配置完成之后开始工作，自动完成节点发现和故障转移。

### 部署 Redis Sentinel
部署
### Redis Sentinel 原理

## Redis Cluster 集群模式

### 手动搭建

### 集群扩容/集群缩容

### 集群中的故障转移

## 自动化集群运维工具