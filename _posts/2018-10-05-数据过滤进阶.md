---
layout:     post
title:      数据过滤进阶 -- 使用操作符
subtitle:   from -- SQL必知必会 
date:       2018-01-05
author:     Alessio
header-img: img/PostBack_01.jpg
catalog: true
tags:
    - SQL
---
### 一点概念
- 操作符（ Operator ） : 操作符用来联结或改变 `WHERE` 字句中的字句的关键字，也称为`逻辑操作符` (  `Logical operator` )

### AND 操作符
要通过不止一个列进行过滤，可以使用 `AND` 操作符给 `WHERE` 字句附加条件，下述代码给出了例子：

```sql
SELECT
    id,price,name
FROM
    products
WHERE
    id=26 AND price <= 100;
```

#### `Tips` : `AND` 操作符可连接两个过滤条件，若有多个条件，需要多个 `AND` 操作符联结。
### OR 操作符

`OR` 操作符和 `AND` 操作符正好相反，指使 DBMS 检索匹配任一条件的行。

然而许多 DBMS 在 `OR` 或 `WHERE` 字句的第一个条件得到满足的情况下，就不再计算第二个条件了

（ 在第一个条件满足时，不管第二个条件是否满足，相应的行都会被检索出来 ）

如下的代码将给出一个例子：
```sql
SELECT
    name,price
FROM
    products
WHERE
    id=02 OR id=03
```

### `AND` 和 `OR` 操作符进行组合
在 `WHERE` 字句中，可以包含任意个 `AND` 和 `OR` 操作符，从而进行高级、复杂的数据过滤

但是这将带来一个有趣的问题，看下面给出的代码
```sql
SELECT
    name,price
FROM
    products
WHERE
    id = 01 OR id=02 AND price >= 10;

```
出于篇幅原因，在这里我不给出输出信息。

运行这条语句将不到我们期望的结果 —— 会有 `price` 值小于 10 的信息输出。

出现这样结果的原因也非常自然 —— 语句的执行顺序：

> SQL 在执行 `OR`操作符之前，优先执行 `AND` 操作符

因谓操作符的错误组合，得到错误的结果是必然的。接下来，我们将会对语句进行改写：

```sql
SELECT
    name,price
FROM
    products
WHERE
    (id = 01 OR id = 02)
    AND price >= 10;
```

### `IN` 操作符

`IN` 操作符用来指定条件范围，范围中的每个条件都可以进行匹配。`IN` 取一组由 `,` 分割、括在 `( )` 内的合法值。

如下的实例将查找出 id 为 01 或 02 的数据，并将它们按照 name 进行排序
```sql
SELECT
    name,price 
FROM
    products
WHERE
    id IN (01,02)
ORDER BY 
    name;
```
在这里， `IN` 操作符完成了与 `OR` 操作符相同的内容

我们来列举下使用 `IN` 操作符的好处：

> 在有很多合法选项的情况下，`IN` 操作符的书写更直观更清楚
> 
> 在于其他的 `AND` 和 `OR` 操作符组合使用时，求值顺序更容易管理
> 
> `IN` 操作符比一组 `OR` 操作符更有性能优势
> 
> 可以包含其他 `SELECT` 语句，能够更逗台的建立 `WHERE` 子句

### `NOT` 操作符

`NOT` 操作符只有一个功能 —— 否定其后跟的所有条件

看如下示例：

```sql
SELECT
    name
FROM
    products
WHERE NOT
    id = 01
ORDER BY
    name;
```
这将检索出 id 不为 01 的所有数据，如下的改写也可以实现相同功能

```sql
SELECT
    name
FROM
    products
WHERE
    id <> 01
ORDER BY
    name;
```